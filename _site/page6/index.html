<!doctype html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      Plough => Ruby &middot; Journey through ruby
    
  </title>

  <link rel="stylesheet" href="/styles.css">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">
  <link rel="alternate" type="application/atom+xml" title="Plough => Ruby" href="/atom.xml">

  <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Home" />
<meta name="author" content="andhapp" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Learning Ruby / Rails programming language" />
<meta property="og:description" content="Learning Ruby / Rails programming language" />
<link rel="canonical" href="http://localhost:4000/page6/" />
<meta property="og:url" content="http://localhost:4000/page6/" />
<meta property="og:site_name" content="Plough =&gt; Ruby" />
<link rel="prev" href="http://localhost:4000/page5" />
<link rel="next" href="http://localhost:4000/page7" />
<script type="application/ld+json">
{"url":"http://localhost:4000/page6/","@type":"WebPage","headline":"Home","author":{"@type":"Person","name":"andhapp"},"description":"Learning Ruby / Rails programming language","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">Plough => Ruby</a>
          <small>Journey through ruby</small>
        </h3>
      </header>

      <main>
        <div class="posts">
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2011/04/21/inconsistent-hashes/">
        Inconsistent hashes
      </a>
    </h1>

    <time datetime="2011-04-21T00:00:00+01:00" class="post-date">21 Apr 2011</time>

    <p>To clarify, hashes here does not mean the Hash class. Object’s in ruby have a hash method that returns a hash code for an object. The hash is also used in the background by the eql? method. So, it’s safe to say that two objects are equal if their hash methods return the same value.</p>

<p>Now, carry out a simple exercise and see what happens. Fire up an IRB session and run the following code, one by one:</p>

<pre>
    "test".hash
    1.hash
    [].hash
</pre>

<p>And note the output after every command run. Now, exit out of IRB and start a fresh session and run the same piece of code again. This time you will see the hash values have changed completely. This might be a bit surprising but it has been implemented in Ruby 1.9 for security reasons as it avoids one from guessing hash values. I picked this up from Ruby-core ML discussion and hope you find it useful.</p>

  </article>
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2011/04/17/an-interesting-ruby-method/">
        An Interesting Ruby Method
      </a>
    </h1>

    <time datetime="2011-04-17T00:00:00+01:00" class="post-date">17 Apr 2011</time>

    <p>In this post, I will talk about a ruby method that I had no idea existed which might come handy in debugging your code.</p>

<p>The method I am talking about is <em>set_trace_func</em>. It’s part of the Kernel class and it does what it says. Allows one to set the method tracing on a method. The following snippet explains it further. Here, we have a class, TestingSetProcFunc:</p>

<pre>
    class TestingSetProcFunc
      def traceThisMethod
        source = 1
        target = 2
      end
    end
</pre>

<p>To inject set_trace_func in, it needs to be called before the method is invoked, like this:</p>

<pre>    
    puts "Event    File:Line                Id          Binding        Classname"
    set_trace_func proc { |event, file, line, id, binding, classname|
      printf "%8s %s:%-2d %20s %12s %8s\n", event, file, line, id, binding, classname
    }
</pre>

<p>It takes a proc with upto 6 arguments. These are the events with their brief descriptions:</p>

<ul>
  <li>c-call (call a C-language routine)</li>
  <li>c-return (return from a C-language routine)</li>
  <li>call (call a Ruby method)</li>
  <li>class (start a class or module definition)</li>
  <li>end (finish a class or module definition)</li>
  <li>line (execute code on a new line)</li>
  <li>raise (raise an exception)</li>
  <li>return (return from a Ruby method).</li>
</ul>

<p>Now, to run this we just need to call the method and look at the output:</p>

<pre>
    tracer = TestingSetProcFunc.new
    tracer.traceThisMethod
</pre>

<p>This is what the output will look like when you run it on the command line:</p>

<pre>    
Event    File:Line                Id          Binding        Classname
c-return test.rb:11       set_trace_func #&lt;Binding:0x0b53c4&gt;   Kernel
    line test.rb:13                      #&lt;Binding:0x0b52fc&gt;         
  c-call test.rb:13                  new #&lt;Binding:0x0b525c&gt;    Class
  c-call test.rb:13           initialize #&lt;Binding:0x0b5144&gt; BasicObject
c-return test.rb:13           initialize #&lt;Binding:0x0b5090&gt; BasicObject
c-return test.rb:13                  new #&lt;Binding:0x0b4ff0&gt;    Class
    line test.rb:14                      #&lt;Binding:0x0b4f50&gt;         
    call test.rb:2       traceThisMethod #&lt;Binding:0x0b4eb0&gt; TestingSetProcFunc
    line test.rb:3       traceThisMethod #&lt;Binding:0x0b4dfc&gt; TestingSetProcFunc
    line test.rb:4       traceThisMethod #&lt;Binding:0x0b4d5c&gt; TestingSetProcFunc
  return test.rb:5       traceThisMethod #&lt;Binding:0x0b4cbc&gt; TestingSetProcFunc    
</pre>

<p>This output gives one a good idea about the work that is happening in the background. The weird looking Binding instance is the context at that particular place in the code. I have just scratched the surface and I am sure there’s a lot one can do with this method. Have a look at the <a href="https://github.com/ruby/ruby/blob/trunk/test/ruby/test_settracefunc.rb">ruby’s test for set_trace_func</a> for more useful ways of employing it.</p>

  </article>
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2011/03/12/ruby-hacking-guide-chapter-1/">
        Ruby Hacking Guide - Chapter 1
      </a>
    </h1>

    <time datetime="2011-03-12T00:00:00+00:00" class="post-date">12 Mar 2011</time>

    <p>I have completed proof-reading and testing the code from old Ruby Hacking Guide and re-releases in the wild again. It still needs some styling work but I will hopefully find time to sort that out this week.</p>

<p>In the meantime, have a <a href="http://rubyhacking.andhapp.co.uk/2011/01/30/chapter-1.html">read through</a> and see if you spot any mistakes.</p>

  </article>
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2011/03/12/free-ruby-1.9-online-book/">
        Free Ruby 1.9 Online Book
      </a>
    </h1>

    <time datetime="2011-03-12T00:00:00+00:00" class="post-date">12 Mar 2011</time>

    <p>Just found this nicely done online book on <a href="http://ruby.runpaint.org/">Ruby 1.9</a>, in particular. It’s a must see.</p>


  </article>
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2011/01/21/ruby-file-append-mode/">
        Ruby File append mode
      </a>
    </h1>

    <time datetime="2011-01-21T00:00:00+00:00" class="post-date">21 Jan 2011</time>

    <p>There are different file modes available to the developer when creating and opening new files in Ruby. One that I didn’t know about was “a” which basically means append to the end of the file rather than starting a new one. What could it be useful for? One example would be as a log file of some sort where one wants to preserve the old data and add new data to the end of the file. Very trivial but helpful if you know about these things. Just makes you a better developer.</p>

<p>A simple code example would be:</p>

<pre>
    file = File.new("datamapper.log", "a")  
</pre>

  </article>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page7">Older</a>
  
  
    <a class="pagination-item newer" href="/page5">Newer</a>
  
</div>

      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2021-07-03T06:18:22+01:00">2021</time>. All rights reserved.
        </small>
      </footer>
    </div>

    
  </body>
</html>
