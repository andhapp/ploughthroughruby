<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Convert Array to Hash mystery</title>
   <meta name="author" content="Anuj Dutta (andHapp)" />
   <meta name="description" content="Journey through ruby exploring its various facets."/>

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
</head>

<body class="home blog">
  <div id="siteWrapper">
    <h1 class="vcard author">
      <a class="fn" title="Home" href="/">plough => Ruby</a>
    </h1>
    <div id="siteDescription">Journey through Ruby</div>
    <div id="coreContent" class="hfeed">
      <div class="post hentry">
  <h5 class="postDate">
    02 January 2011
  </h5>
  <div class="postContent">
    <h3 class="entry-title">
      Convert Array to Hash mystery
    </h3>
  </div>
  <div class="entry-content">
    <p>It is always easy to find solutions on Google but the real fun is in finding out how a bit of code works. It just helps you understand much more about the language and how it behaves. Converting an array to hash is easy. Just use this piece of code that I found on google:</p>

<pre>
  some_array = [1,2,3]
  some_hash = Hash[*(some_array.collect{|v| [v,v]}.flatten)] # yields {1=>1, 2=>2, 3=>3}
</pre>


<p>Few people have asked the question behind this conversion and I just decided to break it apart and tackle it bit by bit. Our objective, again, is to convert an array to a hash. Hash's ruby documenation tells us that a new Hash object can be created by using even number of arguments. Something similar to the following code:</p>

<pre>
  some_hash = Hash[1,1,2,2,3,3] # This creates a hash object similar to this {1=>1, 2=>2, 3=>3}
</pre>


<p>All we need to do now is convert our some_array (defined in the first code snippet) and convert it into [1,1,2,2,3,3].</p>

<p>It's simple really. We take the some_array and convert it into an array's or array like this:</p>

<pre>
  some_array = [1,2,3]
  some_array.collect{|v| [v, v]} # will yield [[1,1], [2,2], [3,3]]
</pre>


<p>Now to convert it into [1,1,2,2,3,3] we just need to flatten this array of arrays like this:</p>

<pre>
  some_array = [1,2,3]
  some_array.collect{|v| [v, v]}.flatten # will yield [1,1,2,2,3,3]
</pre>


<p>Now, all we need to do is use the splat (*) unary operator. The splat operator expands the supplied array into individual arguments which is what we need to convert array into a hash. You could also achieve the same with the following snippet:</p>

<pre>
  some_array = [1,2,3]
  some_hash = Hash[*(some_array+some_array).sort] # yields {1=>1, 2=>2, 3=>3}
</pre>


<p>I hope you can work that out yourself. I hope this little discussion helped you.</p>

  </div>
</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>21 Apr 2011</span> &raquo; <a href="/2011/04/21/inconsistent-hashes.html">Inconsistent hashes</a></li>
    
      <li><span>17 Apr 2011</span> &raquo; <a href="/2011/04/17/an-interesting-ruby-method.html">An Interesting Ruby Method</a></li>
    
      <li><span>12 Mar 2011</span> &raquo; <a href="/2011/03/12/ruby-hacking-guide-chapter-1.html">Ruby Hacking Guide - Chapter 1</a></li>
    
  </ul>
</div>
    </div>
  </div>
  <div id="footer">
    <h5>Elsewhere</h5>
    <ul class="elsewhere">
      <li><a href="http://www.andhapp.com">andHapp.com</a></li>
      <li><a href="http://github.com/andhapp">Github</a></li>
      <li><a href="http://twitter.com/andhapp">Twitter</a></li>
    </ul>
    <div class="footerContent">
      <p>&copy; ploughthroughruby.co.uk. Powered by <a href="https://github.com/mojombo/jekyll/">Jekyll</a> and <a href="http://jimbarraud.com/manifest/">Manifest</a></p>
    </div>
  </div>
</body>
</html>
