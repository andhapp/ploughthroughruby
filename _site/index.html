<!doctype html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      Plough => Ruby &middot; Journey through ruby
    
  </title>

  <link rel="stylesheet" href="/styles.css">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">
  <link rel="alternate" type="application/atom+xml" title="Plough => Ruby" href="/atom.xml">

  <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Home" />
<meta name="author" content="andhapp" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Learning Ruby / Rails programming language" />
<meta property="og:description" content="Learning Ruby / Rails programming language" />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:site_name" content="Plough =&gt; Ruby" />
<link rel="next" href="http://localhost:4000/page2" />
<script type="application/ld+json">
{"url":"http://localhost:4000/","@type":"WebSite","headline":"Home","author":{"@type":"Person","name":"andhapp"},"description":"Learning Ruby / Rails programming language","name":"Plough =&gt; Ruby","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">Plough => Ruby</a>
          <small>Journey through ruby</small>
        </h3>
      </header>

      <main>
        <div class="posts">
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2019/09/27/yarn-install-on-mojave/">
        Yarn Install On Mojave
      </a>
    </h1>

    <time datetime="2019-09-27T00:00:00+01:00" class="post-date">27 Sep 2019</time>

    
<hr />
<p>layout: post
title: Yarn install on Mojave
date_string: 27 September 2019
—</p>

<p>If you’re having issues in <code class="highlighter-rouge">yarn install</code> on Mojave, then it’s probably down to the fact
that Mojave doesn’t support different i386 architecture and anything that involves native
building, gems or node modules, seems to fail. The solution is to clean the slate and start
fresh. That’s exactly what I had to do to fix the yarn installation errors:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rm yarn.lock
yarn cache clean
yarn install
</code></pre></div></div>

<p>These commands worked like a charm!</p>

<p>Hope it helps!</p>

  </article>
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2019/09/27/installing-ffi-1.11.1-on-mojave/">
        Installing Ffi 1.11.1 On Mojave
      </a>
    </h1>

    <time datetime="2019-09-27T00:00:00+01:00" class="post-date">27 Sep 2019</time>

    
<hr />
<p>layout: post
title: Installing ffi 1.11.1 on Mojave
date_string: 27 September 2019
—</p>

<p>If you’ve installed to Mojave and are frustrated by the errors you get on installing ffi (1.11.1), then this blog 
post is for you.</p>

<p>I had the same issue last week and after trawling through the internet and trying every possible suggestion, one finally
worked!</p>

<p>But, before that, a little discussion on the actual error is in order. Below is a small snippet of the actual error on <code class="highlighter-rouge">bundle install</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Configuring libffi for i386
configure: error: in `/Users/andhapp/Projects/github/startup/pimful/vendor/ruby/2.6.0/gems/ffi-1.11.1/ext/ffi_c/libffi-i386':
configure: error: C compiler cannot create executables
See `config.log' for more details
make[1]: *** No targets specified and no makefile found.  Stop.
make: *** ["/Users/andhapp/Projects/github/startup/pimful/vendor/ruby/2.6.0/gems/ffi-1.11.1/ext/ffi_c"/libffi-i386/.libs/libffi_convenience.a] Error 2
</code></pre></div></div>

<p><code class="highlighter-rouge">libffi</code> is trying to configure for i386 architecture. Mojave doesn’t support that architecture, so the actual linking file is missing. A peek into the 
<code class="highlighter-rouge">config.log</code> reveals that fact:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ld: warning: The i386 architecture is deprecated for macOS (remove from the Xcode build setting: ARCHS)
ld: warning: ignoring file /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib/libSystem.tbd, missing required architecture i386 in file /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib/libSystem.tbd
ld: dynamic main executables must link with libSystem.dylib for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation)
</code></pre></div></div>

<p>There are several suggestion to actually link the file present in Mojave and make the missing file available that way, but that doesn’t work either.</p>

<p>After several frustrating hours, the following suggestion worked perfectly:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew reinstall libffi

export LDFLAGS="-L/usr/local/opt/libffi/lib"
export PKG_CONFIG_PATH="/usr/local/opt/libffi/lib/pkgconfig"
</code></pre></div></div>

<p>Reinstallation of <code class="highlighter-rouge">libffi</code> installs it correctly for Mojave and then <code class="highlighter-rouge">bundle install</code> works like a charm.</p>

<p>Hope it helps!</p>

  </article>
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2016/10/06/dont-blindly-follow-blog-posts/">
        Dont Blindly Follow Blog Posts
      </a>
    </h1>

    <time datetime="2016-10-06T00:00:00+01:00" class="post-date">06 Oct 2016</time>

    
<hr />
<p>layout: post
title: Don’t blindly follow blog posts
date_string: 06 October 2016
—</p>

<p>Technlogy changes fast!</p>

<p>And it’s a blatant fact.</p>

<p>And with changing technology opinions, benchmarks and blog posts become obsolete, fast.</p>

<p>I was reading a blog post recently about adding some <a href="http://marianposaceanu.com/articles/improve-rails-performance-by-adding-a-few-gems">performance related gems</a>
to improve rails’s performace. It’s a very nice, detailed article with benchmarks.</p>

<p>Instead of just blindly adding the suggested gems to the project, I ran the scripts again and found that:</p>

<ul>
  <li><code class="highlighter-rouge">escape_utils</code> gem makes things worse on <code class="highlighter-rouge">ruby 2.3.1</code> and <code class="highlighter-rouge">rails 5</code>, so no point in adding it.</li>
  <li><code class="highlighter-rouge">fast_blank</code> gem, on the other hand, makes things slightly better, so definitely worth adding. With
slightly better I mean you are able to make more requests/sec.</li>
  <li><code class="highlighter-rouge">je</code> and <code class="highlighter-rouge">jemalloc</code> gem didn’t install for <code class="highlighter-rouge">ruby 2.3.1</code> at all.</li>
</ul>

<p>Well, the point of this short blog post was to make you aware that blog posts go out of date and sometimes
it’s necessary to re-evaluate the findings and ensure you are adding the gems for the right reasons.</p>

<p>Hope it helps!</p>

  </article>
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2016/09/14/Use-Sequel-for-non-rails-ruby-apps/">
        Use Sequel For Non Rails Ruby Apps
      </a>
    </h1>

    <time datetime="2016-09-14T00:00:00+01:00" class="post-date">14 Sep 2016</time>

    
<hr />
<p>layout: post
title: Use Sequel for non-rails ruby apps
date_string: 14 September 2016
—</p>

<p>I am writing a ruby script to retireve some data via HTTP call and then add it to the database.</p>

<p>Now, I decided to use ActiveRecord as an ORM and wrote a <a href="https://github.com/andhapp/activerecord_sans_rails">gem</a> for the same.</p>

<p>Nothing complicated. It’s just a Rakefile that provides popular activerecord rake tasks.</p>

<p>But, then I stumbled across blog post on <a href="https://www.toptal.com/ruby/api-with-sinatra-and-sequel-ruby-tutorial">Sequel</a> and I feel
Sequel is a better choice for an ORM for a non-rails app.</p>

<p>Why?</p>

<p>Because, Rails is opinionated.</p>

<p>And it’s nuances works nice for a Rails app.</p>

<p>Anything outside of the realms of a standard Rails app and all bets are off.</p>

<p>It is like fitting a square peg in a round hole. It’s possible but you will have to shave off the extra bits.</p>

<p>Sequel on the other hand seems like a better fit for a ruby script.</p>

<p>Will post my experience with Sequel. It has ample documentation and the project was last updated on 16th September 2016.
There are no outstanding pull requests or issues on github which implies the project is active and nicely looked after.</p>

  </article>
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2016/08/29/Improve-bundler-cli/">
        Improve Bundler Cli
      </a>
    </h1>

    <time datetime="2016-08-29T00:00:00+01:00" class="post-date">29 Aug 2016</time>

    
<hr />
<p>layout: post
title: Improve Bundler CLI
date_string: 29 August 2016
—</p>

<p>Learn another programming language.</p>

<p>Learn from another programming ecosystem.</p>

<p>Learn from another programming language’s tools and bring it back to the language you love.</p>

<p>Fact is, I love Ruby!</p>

<p>However, I’ve been spending a lot of time with Node.js lately. NPM provides a nice way to install
any new packages straight from the command line, like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install react --save
</code></pre></div></div>

<p>I like this convenience.</p>

<p>With an intention to improve Ruby’s ecosystem and tools, I would like to bring this to Ruby.</p>

<p>So, I’ve added a <a href="https://github.com/bundler/bundler/issues/4932">new issue</a> to Bundler. Let’s see what others feel about it.</p>

<p><strong>Update - 31 August 2016</strong></p>

<p>I had a couple of responses for my Bundler issue and it turns out there is indeed a way to add gems via bundler’s CLI.</p>

<p>You can use the <code class="highlighter-rouge">inject</code> command like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle inject pg 0.18.4
</code></pre></div></div>

<p>You have to specify the exact version that you want to add though.</p>

<p>Next version of Bundler is going one better and will expose <code class="highlighter-rouge">add</code> command that will add the gem without needing a version number.</p>

  </article>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>

      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2021-07-03T06:18:22+01:00">2021</time>. All rights reserved.
        </small>
      </footer>
    </div>

    
  </body>
</html>
